"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:()=>d});const a=c(require("fastify")),b=c(require("./config/constants"));function c(a){return a&&a.__esModule?a:{default:a}}const d=class{register(a){a.forEach(a=>{this.app.register(a)})}routes(a){a.forEach(a=>{let b=new a;this.app.register(b.routes,{prefix:b.prefix_route})}),this.app.get("/healthcheck",async(a,b)=>{b.send({healthcheck:"server is alive"})})}listen(){this.app.listen(this.app_port,a=>{a&&(this.app.log.fatal({msg:"Application startup error",err:a}),process.exit(1)),console.log(`App listening on the http://${this.app_domain}:${this.app_port} ðŸš€`)})}constructor(c){this.app_domain=b.default.app.domain,this.app_port=b.default.app.port,this.app=(0,a.default)({logger:{transport:{target:"pino-pretty",options:{translateTime:"SYS:h:MM:ss",colorize:!0,ignore:"pid,hostname"}}}}),this.app.addHook("preHandler",(a,b,c)=>{a.body&&a.log.info({body:a.body},"parsed body"),c()}),this.register(c.plugins),this.routes(c.routes)}}
//# sourceMappingURL=app.js.map